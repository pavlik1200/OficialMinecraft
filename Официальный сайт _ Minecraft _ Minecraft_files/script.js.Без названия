"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"===(void 0===value?"undefined":_typeof(value))&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};var _app_isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return _app_isMobile.Android()||_app_isMobile.BlackBerry()||_app_isMobile.iOS()||_app_isMobile.Opera()||_app_isMobile.Windows()}};var _mi_topSlider_isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return _mi_topSlider_isMobile.Android()||_mi_topSlider_isMobile.BlackBerry()||_mi_topSlider_isMobile.iOS()||_mi_topSlider_isMobile.Opera()||_mi_topSlider_isMobile.Windows()}};function clickBuy(){$(".js-buy").unbind("click"),$(".js-buy").click(function(){var offerId=$(this).data("offerid"),productName=$(this).data("name"),price=new Intl.NumberFormat("ru-RU").format(parseInt($(this).attr("data-price").replace(/\s+/g,""))),oldPrice=new Intl.NumberFormat("ru-RU").format(parseInt($(this).attr("data-old-price").replace(/\s+/g,""))),img=($(this).data("url"),$(this).data("img"));$(".js-modal-name").text(productName),$(".js-modal-price").text(price+" ₽"),$(".js-modal-old-price").text(oldPrice+" ₽"),$(".js-modal-img").attr({src:img,alt:productName}),$("#buy-modal").modal("show"),$("#buy-modal .modal-content").addClass("ajax-overlay"),$.ajax({url:"/local/components/mi/el.catalog.element/ajax.php",method:"POST",data:{action:"add2Basket",offerId:offerId}}).done(function(result){var json=JSON.parse(result);$("#detail-modal__footer-in-basket").html(json.BASKET.IN_BASKET),$(".header__basket.data-basket-amount").attr("data-basket-amount",json.BASKET.QUANTITY),$("#buy-modal .modal-content").removeClass("ajax-overlay")})}),$(".js-close-modal").click(function(e){e.preventDefault(),$("#buy-modal").modal("hide")})}function Validate(el,btn,parent){function addError(el){el.parentNode.classList.remove("input-success"),el.parentNode.classList.add("input-error")}function addSuccess(el){el.parentNode.classList.remove("input-error"),el.parentNode.classList.add("input-success")}function verifyInputBlur(e){switch(this.getAttribute("data-name")){case"check-pass":var changePass=this.closest(parent).querySelector('[data-name="password"]').value;(e.target.value!==changePass&&e.target.value.length<6||this.parentNode.classList.contains("input-success"))&&addError(this),e.target.value===changePass&&6<=e.target.value.length&&this.parentNode.classList.contains("input-error")&&addSuccess(this);break;case"require":(e.target.value.length<=0||this.parentNode.classList.contains("input-success"))&&addError(this),0<e.target.value.length&&this.parentNode.classList.contains("input-error")&&addSuccess(this)}}function verifyInputLive(e){switch(this.getAttribute("data-name")){case"email":var emailValid=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;emailValid.test(e.target.value)&&!this.parentNode.classList.contains("input-success")||addError(this),emailValid.test(e.target.value)&&this.parentNode.classList.contains("input-error")&&addSuccess(this);break;case"password":(e.target.value.length<6||this.parentNode.classList.contains("input-success"))&&addError(this),6<=e.target.value.length&&this.parentNode.classList.contains("input-error")&&addSuccess(this)}}this.el=el,this.btn=btn,this.parent=parent,this.initValidate=function(call){var validate=document.querySelectorAll(this.el);validate.forEach(function(item){0<item.offsetWidth&&("phone"===item.getAttribute("data-name")&&$(item).inputmask({mask:"+7 (999) 999-9999",onincomplete:function(){addError(this)},oncomplete:function(){addSuccess(this)},onKeyDown:function(){addSuccess(this)}}),item.addEventListener("change",verifyInputLive),item.addEventListener("paste",verifyInputLive),item.addEventListener("blur",verifyInputLive),item.addEventListener("input",verifyInputBlur),item.addEventListener("paste",verifyInputBlur),item.addEventListener("blur",verifyInputBlur))});var btnSend=document.querySelector(this.btn);0<btnSend.offsetWidth&&btnSend.addEventListener("click",function(e){e.preventDefault();for(var i=0;i<validate.length;i++)0<validate[i].offsetWidth&&""===validate[i].value&&addError(validate[i]);call()})}}new Validate(".js-basket-validate",".js-send","#order-form");var validRegister=new Validate(".js-register-validate",".js-register-submit",".js-register"),validAuth=new Validate(".js-auth-validate",".js-auth-submit",".js-auth-form");new Validate(".js-subscr-validate",".js-subscr-submit",".js-subscr-form");function initRecommendedSlides(el,argument_1){var curr=1<arguments.length&&void 0!==argument_1?argument_1:5;el.not(".slick-initialized").slick({infinite:!0,slidesToShow:curr,slidesToScroll:curr,nextArrow:".js-arrow-recommended-right",prevArrow:!1,swipe:!1,responsive:[{breakpoint:1245,settings:{infinite:!0,slidesToShow:3,slidesToScroll:3,nextArrow:".js-arrow-recommended-right",prevArrow:!1,swipe:!1}}]})}function watchRR(target,call){if(!target)return!1;new MutationObserver(function(mutationList,observer){clickBuy(),call&&call(target),$(window).resize(function(){return observer.disconnect()})}).observe(target,{childList:!0,subtree:!0})}var script_isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return script_isMobile.Android()||script_isMobile.BlackBerry()||script_isMobile.iOS()||script_isMobile.Opera()||script_isMobile.Windows()}};function callAjaxAuth(){var login=$("#auth-form-email").val(),password=$("#auth-form-password").val();$.ajax({type:"POST",url:"/local/templates/main/components/bitrix/system.auth.authorize/.default/check_fields.php",data:"login="+login+"&password="+password,success:function(msg){"error"!=msg?(window.location=window.location,$(".js-auth-form").submit()):$("#auth-form-error").html('<span style="color:red">Неверный логин или пароль.</span>')},error:function(XMLHttpRequest,textStatus,errorThrown){return alert("Неверный логин или пароль"),!1}})}"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||window;for(var i=0;i<this.length;i++)callback.call(thisArg,this[i],i,this)}),Element.prototype.closest||(Element.prototype.closest=function(css){for(var node=this;node;){if(node.matches(css))return node;node=node.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),$(document).ready(function(){$(".header__country_list").clone().appendTo(".header__country"),$(".nav-head__list").clone().appendTo("#dropdown-catalog"),function(){var $menuLink=$(".menu-link"),$topSlider=$(".top-slider");0<$topSlider.length&&(_mi_topSlider_isMobile.any()?$topSlider.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',dots:!0,draggable:!0,autoplay:!0,autoplaySpeed:5e3,speed:500}):($topSlider.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',dots:!0,draggable:!0,autoplay:!0,autoplaySpeed:5e3,speed:500}).on("afterChange",function(event,slick,currentSlide){$menuLink.css("color",$(".slick-list .slick-slide").eq(currentSlide+1).find(".slide-info").css("color"))}),$menuLink.css("color",$(".slick-active .slide-info").css("color"))))}(),function(){var htmlElement=$("html");$(".js-hamburger").click(function(){$(this).toggleClass("is-active"),$(".js-profile-menu").removeClass("active-auth")}),$("#menu-catalog").click(function(){htmlElement.toggleClass("menu-catalog__opened")}),$("#menu-country").click(function(){htmlElement.toggleClass("menu__country_opened")}),$(".back-element").click(function(){htmlElement.removeClass("menu__country menu-catalog__opened opened-menu-authorized opened-city menu__country_opened")}),$(".user-name .user-name__link").click(function(){htmlElement.toggleClass("opened-user-menu"),htmlElement.removeClass("opened-menu-authorized")}),$(".menu-authorized .item-separator").click(function(){htmlElement.toggleClass("opened-menu-authorized"),htmlElement.removeClass("opened-user-menu")}),$(".menu-city").click(function(){htmlElement.removeClass("opened-menu-authorized"),htmlElement.toggleClass("opened-city")}),_app_isMobile.any();var defButtonWidth,defButtonText,defInputWidth,subscribeForItem=$(".subscribe-for-item");subscribeForItem.click(function(){if($(".subscription-form input").is(":visible")){var window=$('<div class="modal-window" id="subscribe-form"><div class="modal-shadow"><div class="modal-container"><div class="modal-body"><div class="modal-header"><h2>Оформление подписки</h2><div class="close-click"><i class="fa fa-times" aria-hidden="true"></i></div></div><div class="modal-content"><p></p></div></div></div></div></div>');if(!$(".subscription-form input").val())return window.find(".modal-content p").html("Введите email!"),htmlElement.append(window),window.show(),window.find(".close-click").click(function(){window.remove()}),!1;$.ajax({url:"/local/php_interface/include/subscribe.php",method:"POST",data:{email:$(".subscription-form input").val(),subscrId:10}}).done(function(answer){var window=$('<div class="modal-window" id="subscribe-form"><div class="modal-shadow"><div class="modal-container"><div class="modal-body"><div class="modal-header"><h2>Оформление подписки</h2><div class="close-click"><i class="fa fa-times" aria-hidden="true"></i></div></div><div class="modal-content"><p></p></div></div></div></div></div>');"success"==JSON.parse(answer).result?(window.find(".modal-content p").html("Вы успешно подписались на рассылку &laquo;Оранжевый четверг&raquo;"),htmlElement.append(window),window.show(),window.find(".close-click").click(function(){window.remove(),$(".subscription-form input").val("").fadeOut(),subscribeForItem.animate({left:0,width:defButtonWidth},function(){$(this).find($("span")).html(defButtonText)})})):(window.find(".modal-content p").html("Произошла ошибка. Пожалуйста, попробуйте еще раз позднее."),htmlElement.append(window),window.show(),window.find(".close-click").click(function(){window.remove()}))})}else defButtonWidth=subscribeForItem.outerWidth(),defButtonText=subscribeForItem.find($("span")).html(),defInputWidth=$(".subscription-form input").outerWidth(),97,$(this).animate({left:defInputWidth,width:97}),$(".subscription-form input").fadeIn(),$(this).find($("span")).html("ok")});var geolocationForm=$(".geolocation-form");1100<=$(window).width()&&$(document).mouseup(function(e){geolocationForm.is(e.target)||0!==geolocationForm.has(e.target).length||htmlElement.removeClass("opened-city")})}(),isMobile.any()&&$(".js__footer-menu__title").click(function(e){e.preventDefault(),$(this).siblings(".footer-menu__list").slideToggle(),$(this).toggleClass("footer-menu__title-open")}),$(".modal-window").is(":visible")&&$("body").addClass("lock"),$(".modal-window .close-click").click(function(){$(".modal-window").hide(),$("body").removeClass("lock")}),$(".open-modal").click(function(){var modal=$(this).data("target");$("#"+modal).show()});var navSearch=$(".nav-search");$(".js-stick-search").click(function(e){e.preventDefault(),"false"===$(e.target).closest(".header__login").attr("data-search")&&$(e.target).closest(".header__login").attr("data-search","true")}),$(".js-stick-close").click(function(e){e.preventDefault(),"true"===$(e.target).closest(".header__login").attr("data-search")&&$(e.target).closest(".header__login").attr("data-search","false")}),$(".header__country").click(function(){$(this).toggleClass("header__country_opened"),$(this).children(".header__country_list").toggle()}),$(document).mouseup(function(e){var div=$(".header__country");div.is(e.target)||0!==div.has(e.target).length||div.removeClass("header__country_opened")}),$(".js-mob-search").click(function(){$(".header__block-search").slideToggle(600)}),$(".js-search-close").click(function(){$(".header__block-search").slideUp(600)});var $goToReg=$(".js-gotoreg"),$goToAuth=$(".js-gotoauth"),$elAuth=$(".js-auth-form"),$elReg=$(".js-register"),headerRegTitle=$(".header__reg-title");$goToReg.click(function(){$elReg.addClass("reg-form-active"),$elAuth.removeClass("reg-form-active"),headerRegTitle.text("Регистрация"),validRegister.initValidate(function(){$(".input-error").length<=0&&function(){var email=$("#form-register-e-mail").val(),password=$("#form-register-auth-pass").val(),confirmPass=$("#form-register-confirm-pass").val();password==confirmPass&&$.ajax({url:"/local/components/mi/main.register/templates/.default/ajax.php",method:"POST",data:{email:email,password:password,confirmPass:confirmPass}}).done(function(result){1!=result&&$("#register-error").html(result)})}()})}),$goToAuth.click(function(){$elAuth.addClass("reg-form-active"),$elReg.removeClass("reg-form-active"),headerRegTitle.text("Авторизация"),validAuth.initValidate(function(){$(".input-error").length<=0&&callAjaxAuth()})}),$("#js__show-reg-form").click(function(){$goToReg.trigger("click")}),$("#js__show-auth-form").click(function(){$goToAuth.trigger("click")}),$(document).click(function(e){$(e.target).closest(".nav-search__form").length||(navSearch.removeClass("nav-search__open"),$(e.target).closest(".header__country").length||e.stopPropagation())});var navHead=$(".nav-head");script_isMobile.any()||("none"!==navHead.css("display")&&navHead.stickUp(),$(window).scroll(function(){$(".nav-search.nav-search__open")&&navSearch.removeClass("nav-search__open")})),1100<=$(window).width()&&$(".js-recommend-mobile")?$(".js-recommend-mobile").remove():$(window).width()<1099&&$(".js-recommend-desktop")&&$(".js-recommend-desktop").remove();var el,event,dropdown=$(".js-target"),searchSticky=$(".header__search_sticky"),burger=$("#hamburger"),menuTop=$(".header-menu"),btnToggleMenu=$(".js-toggle-menu"),catalogTop=$(".js-catalog"),searchClose=$(".js-search-close");$(".js-burger").click(function(){$("#header-mobile").hasClass("show")?$(document.body).removeClass("body-lock"):($(document.body).addClass("body-lock"),$(".header__auth").dropdown("hide"))}),btnToggleMenu.click(function(e){e.preventDefault(),catalogTop.css("display","block")}),$(".js-back").click(function(e){e.preventDefault(),catalogTop.css("display","none")}),991<$(window).innerWidth()&&catalogTop.css("display","flex"),992<$(window).innerWidth()?(event="dropdown",(el=dropdown).on("show.bs."+event,function(){$(document.body).addClass("body-lock")}),el.on("hide.bs."+event,function(){$(document.body).removeClass("body-lock")})):$(window).innerWidth()<=992&&function(el,event){el.unbind("show.bs."+event),el.unbind("hide.bs."+event)}(dropdown,"dropdown"),$(".mod-auth").click(function(){$(".header__auth").hasClass("show")?$(document.body).removeClass("body-lock"):($(document.body).addClass("body-lock"),$("#header-mobile").collapse("hide"),$("#hamburger").removeClass("open"))}),burger.click(function(e){burger.toggleClass("open")}),$(window).scroll(function(){70<window.pageYOffset&&992<=$(window).innerWidth()?menuTop.addClass("sticky-custom-top"):(menuTop.removeClass("sticky-custom-top"),searchSticky.css("display","none"))}),$(".js-open-search").click(function(e){0<$(".sticky-custom-top").length&&(e.preventDefault(),searchSticky.toggle())}),searchClose.click(function(e){e.preventDefault(),searchSticky.css("display","none")}),$(".js-close-modal").click(function(e){e.preventDefault(),$("#cities-modal").modal("hide"),$("#show-user-auth").modal("hide"),$("#choice-modal").modal("hide")}),$("#choice-modal").modal("show"),$(".js-show-city").click(function(){$("#choice-modal").modal("hide"),setTimeout(function(){return $("#cities-modal").modal("show")},500)}),$(".js-set-default").click(function(){setCookie("GEO_CITY","Москва","","/","","")});var amount=$(".data-basket-amount")[0];function addActiveCity(){$(".city").each(function(i,item){$(item).text()===$($(".js-point-city")[0]).text()&&$(item).addClass("active-city")})}function activeCollapse(){$(window).innerWidth()<992?$(".js-dropdown").attr("data-toggle","collapse"):$(".js-dropdown").attr("data-toggle","").click(function(e){return e.preventDefault()})}$(".js-search-mobile").click(function(e){e.preventDefault(),$(".header__search_mobile").show(0,function(){$(amount).hasClass("deactive")||$(amount).addClass("deactive")})}),$(".js-search-mobile-close").click(function(e){e.preventDefault(),$(".header__search_mobile").hide(0,function(){}),$(amount).hasClass("deactive")&&$(amount).removeClass("deactive")}),"/ru/cart/"===location.pathname&&($(".mod-checkout .header__logo").removeClass("mr-auto"),$(".checkout-city").click(function(){addActiveCity(),$(".checkout-city-list").hasClass("show")?$(document.body).removeClass("body-lock"):$(document.body).addClass("body-lock")}),$(".js-checkout-back").click(function(){$(document.body).removeClass("body-lock")}),$(".checkout-city-list .dropdown-name").click(function(e){return e.preventDefault()})),$(".js-open-auth").click(function(e){e.preventDefault(),$("#show-user-auth").modal("toggle")}),$("#show-user-auth").on("shown.bs.modal",function(){validAuth.initValidate(function(){$(".input-error").length<=0&&callAjaxAuth()})}),$("#cities-modal").on("shown.bs.modal",function(){addActiveCity()}),$(".js-link-city").click(function(){addActiveCity()}),$(window).innerWidth()<992&&$(".js-breadcrumb-item").each(function(i,item){0!==i&&i!==$(".js-breadcrumb-item").length-1&&$(item).children().text("...")}),activeCollapse(),$(window).resize(function(){return activeCollapse()}),$(".js-dropdown").click(function(){$(this).next().hasClass("show")?$(this).children(".js-footer-arrow").css("transform",""):$(this).children(".js-footer-arrow").css("transform","rotate(-90deg)")}),clickBuy(),window.showToast=function(){$(".toast-custom").toast("show")},window.hideToast=function(){$(".toast-custom").toast("hide")},function(){var recommendedDesktop=document.querySelector(".js-recommended-desk"),dealsDesktop=document.querySelector(".js-deals-desk"),recommndedMob=document.querySelector(".js-recommended-mob"),dealsMob=document.querySelector(".js-deals-mob"),liders=document.querySelector(".js-liders-product");watchRR(recommendedDesktop,function(target){var recommend=$(".js-recommended.row"),lengthItems=$(".js-recommended.row .catalog-item").length;lengthItems<=5&&0!=lengthItems?initRecommendedSlides(recommend,lengthItems):initRecommendedSlides(recommend)}),watchRR(dealsDesktop,function(target){!function(el){el.not(".slick-initialized").slick({infinite:!0,slidesToShow:4,slidesToScroll:4,prevArrow:".js-arrow-deals-left",nextArrow:".js-arrow-deals-right",swipe:!1,responsive:[{breakpoint:991,settings:"unslick"}]})}($(target).find(".js-deals"))}),watchRR(recommndedMob),watchRR(dealsMob),watchRR(liders)}()})}]);